/*
 * simplyScroll 2 - a scroll-tastic jQuery plugin
 *
 * http://logicbox.net/jquery/simplyscroll/
 *
 * Copyright (c) 2009-2012 Will Kelly - http://logicbox.net
 *
 * Dual licensed under the MIT and GPL licenses.
 *
 * Version: 2.0.5 Last revised: 10/05/2012
 *
 */(function(e,t,n){e.fn.simplyScroll=function(t){return this.each(function(){new e.simplyScroll(this,t)})};var r={customClass:"simply-scroll",frameRate:24,speed:1,orientation:"horizontal",auto:!0,autoMode:"loop",manualMode:"end",direction:"forwards",pauseOnHover:!0,pauseOnTouch:!0,pauseButton:!1,startOnLoad:!1};e.simplyScroll=function(n,i){var s=this;this.o=e.extend({},r,i||{});this.isAuto=!1!==this.o.auto&&null!==this.o.autoMode.match(/^loop|bounce$/);this.isRTL=(this.isHorizontal=null!==this.o.orientation.match(/^horizontal|vertical$/)&&this.o.orientation==r.orientation)&&"rtl"==e("html").attr("dir");this.isForwards=!this.isAuto||this.isAuto&&null!==this.o.direction.match(/^forwards|backwards$/)&&this.o.direction==r.direction&&!this.isRTL;this.isLoop=this.isAuto&&"loop"==this.o.autoMode||!this.isAuto&&"loop"==this.o.manualMode;this.events=(this.supportsTouch="createTouch"in document)?{start:"touchstart MozTouchDown",move:"touchmove MozTouchMove",end:"touchend touchcancel MozTouchRelease"}:{start:"mouseenter",end:"mouseleave"};this.$list=e(n);var o=this.$list.children();this.$list.addClass("simply-scroll-list").wrap('<div class="simply-scroll-clip"></div>').parent().wrap('<div class="'+this.o.customClass+' simply-scroll-container"></div>');this.isAuto?this.o.pauseButton&&(this.$list.parent().parent().prepend('<div class="simply-scroll-btn simply-scroll-btn-pause"></div>'),this.o.pauseOnHover=!1):this.$list.parent().parent().prepend('<div class="simply-scroll-forward"></div>').prepend('<div class="simply-scroll-back"></div>');if(1<o.length){var u=!1,a=0;this.isHorizontal?(o.each(function(){a+=e(this).outerWidth(!0)}),u=o.eq(0).outerWidth(!0)*o.length!==a):(o.each(function(){a+=e(this).outerHeight(!0)}),u=o.eq(0).outerHeight(!0)*o.length!==a);u&&(this.$list=this.$list.wrap("<div></div>").parent().addClass("simply-scroll-list"),this.isHorizontal?this.$list.children().css({"float":"left",width:a+"px"}):this.$list.children().css({height:a+"px"}))}this.o.startOnLoad?e(t).load(function(){s.init()}):this.init()};e.simplyScroll.fn=e.simplyScroll.prototype={};e.simplyScroll.fn.extend=e.simplyScroll.extend=e.extend;e.simplyScroll.fn.extend({init:function(){this.$items=this.$list.children();this.$clip=this.$list.parent();this.$container=this.$clip.parent();this.$btnBack=e(".simply-scroll-back",this.$container);this.$btnForward=e(".simply-scroll-forward",this.$container);this.isHorizontal?(this.itemMax=this.$items.eq(0).outerWidth(!0),this.clipMax=this.$clip.width(),this.dimension="width",this.moveBackClass="simply-scroll-btn-left",this.moveForwardClass="simply-scroll-btn-right",this.scrollPos="Left"):(this.itemMax=this.$items.eq(0).outerHeight(!0),this.clipMax=this.$clip.height(),this.dimension="height",this.moveBackClass="simply-scroll-btn-up",this.moveForwardClass="simply-scroll-btn-down",this.scrollPos="Top");this.posMin=0;this.posMax=this.$items.length*this.itemMax;var t=Math.ceil(this.clipMax/this.itemMax);if(this.isAuto&&"loop"==this.o.autoMode)this.$list.css(this.dimension,this.posMax+this.itemMax*t+"px"),this.posMax+=this.clipMax-this.o.speed,this.isForwards?(this.$items.slice(0,t).clone(!0).appendTo(this.$list),this.resetPosition=0):(this.$items.slice(-t).clone(!0).prependTo(this.$list),this.resetPosition=this.$items.length*this.itemMax,this.isRTL&&(this.$clip[0].dir="ltr",this.$items.css("float","right")));else if(!this.isAuto&&"loop"==this.o.manualMode){this.posMax+=this.itemMax*t;this.$list.css(this.dimension,this.posMax+this.itemMax*t+"px");this.posMax+=this.clipMax-this.o.speed;this.$items.slice(0,t).clone(!0).appendTo(this.$list);this.$items.slice(-t).clone(!0).prependTo(this.$list);this.resetPositionForwards=this.resetPosition=t*this.itemMax;this.resetPositionBackwards=this.$items.length*this.itemMax;var r=this;this.$btnBack.bind(this.events.start,function(){r.isForwards=!1;r.resetPosition=r.resetPositionBackwards});this.$btnForward.bind(this.events.start,function(){r.isForwards=!0;r.resetPosition=r.resetPositionForwards})}else this.$list.css(this.dimension,this.posMax+"px"),this.isForwards?this.resetPosition=0:(this.resetPosition=this.$items.length*this.itemMax,this.isRTL&&(this.$clip[0].dir="ltr",this.$items.css("float","right")));this.resetPos();this.interval=null;this.intervalDelay=Math.floor(1e3/this.o.frameRate);if(this.isAuto||"end"!=this.o.manualMode)for(;0!==this.itemMax%this.o.speed;)if(this.o.speed--,0===this.o.speed){this.o.speed=1;break}r=this;this.trigger=null;this.funcMoveBack=function(e){e!==n&&e.preventDefault();r.trigger=!r.isAuto&&r.o.manualMode=="end"?this:null;r.isAuto?r.isForwards?r.moveBack():r.moveForward():r.moveBack()};this.funcMoveForward=function(e){e!==n&&e.preventDefault();r.trigger=!r.isAuto&&r.o.manualMode=="end"?this:null;r.isAuto?r.isForwards?r.moveForward():r.moveBack():r.moveForward()};this.funcMovePause=function(){r.movePause()};this.funcMoveStop=function(){r.moveStop()};this.funcMoveResume=function(){r.moveResume()};if(this.isAuto){this.paused=!1;var s=function(){if(r.paused===!1){r.paused=!0;r.funcMovePause()}else{r.paused=!1;r.funcMoveResume()}return r.paused};this.supportsTouch&&this.$items.find("a").length&&(this.supportsTouch=!1);if(this.isAuto&&this.o.pauseOnHover&&!this.supportsTouch)this.$clip.bind(this.events.start,this.funcMovePause).bind(this.events.end,this.funcMoveResume);else if(this.isAuto&&this.o.pauseOnTouch&&!this.o.pauseButton&&this.supportsTouch){var o,u;this.$clip.bind(this.events.start,function(e){s();var t=e.originalEvent.touches[0];o=r.isHorizontal?t.pageX:t.pageY;u=r.$clip[0]["scroll"+r.scrollPos];e.stopPropagation();e.preventDefault()}).bind(this.events.move,function(e){e.stopPropagation();e.preventDefault();e=e.originalEvent.touches[0];e=o-(r.isHorizontal?e.pageX:e.pageY)+u;e<0?e=0:e>r.posMax&&(e=r.posMax);r.$clip[0]["scroll"+r.scrollPos]=e;r.funcMovePause();r.paused=!0})}else this.o.pauseButton&&(this.$btnPause=e(".simply-scroll-btn-pause",this.$container).bind("click",function(t){t.preventDefault();s()?e(this).addClass("active"):e(this).removeClass("active")}));this.funcMoveForward()}else this.$btnBack.addClass("simply-scroll-btn "+this.moveBackClass).bind(this.events.start,this.funcMoveBack).bind(this.events.end,this.funcMoveStop),this.$btnForward.addClass("simply-scroll-btn "+this.moveForwardClass).bind(this.events.start,this.funcMoveForward).bind(this.events.end,this.funcMoveStop),"end"==this.o.manualMode&&(this.isRTL?this.$btnForward.addClass("disabled"):this.$btnBack.addClass("disabled"))},moveForward:function(){var e=this;this.movement="forward";null!==this.trigger&&this.$btnBack.removeClass("disabled");e.interval=setInterval(function(){e.$clip[0]["scroll"+e.scrollPos]<e.posMax-e.clipMax?e.$clip[0]["scroll"+e.scrollPos]+=e.o.speed:e.isLoop?e.resetPos():e.moveStop(e.movement)},e.intervalDelay)},moveBack:function(){var e=this;this.movement="back";null!==this.trigger&&this.$btnForward.removeClass("disabled");e.interval=setInterval(function(){e.$clip[0]["scroll"+e.scrollPos]>e.posMin?e.$clip[0]["scroll"+e.scrollPos]-=e.o.speed:e.isLoop?e.resetPos():e.moveStop(e.movement)},e.intervalDelay)},movePause:function(){clearInterval(this.interval)},moveStop:function(t){this.movePause();null!==this.trigger&&("undefined"!=typeof t&&e(this.trigger).addClass("disabled"),this.trigger=null);this.isAuto&&"bounce"==this.o.autoMode&&("forward"==t?this.moveBack():this.moveForward())},moveResume:function(){"forward"==this.movement?this.moveForward():this.moveBack()},resetPos:function(){this.$clip[0]["scroll"+this.scrollPos]=this.resetPosition}})})(jQuery,window);