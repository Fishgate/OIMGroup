/*
 * simplyScroll 2 - a scroll-tastic jQuery plugin
 *
 * http://logicbox.net/jquery/simplyscroll/
 *
 * Copyright (c) 2009-2012 Will Kelly - http://logicbox.net
 *
 * Dual licensed under the MIT and GPL licenses.
 *
 * Version: 2.0.5 Last revised: 10/05/2012
 *
 */(function(e,t,n){e.fn.simplyScroll=function(t){return this.each(function(){new e.simplyScroll(this,t)})};var r={customClass:"simply-scroll",frameRate:24,speed:3,orientation:"horizontal",auto:!0,autoMode:"loop",manualMode:"end",direction:"forwards",pauseOnHover:!0,pauseOnTouch:!0,pauseButton:!1,startOnLoad:!1};e.simplyScroll=function(n,i){var s=this;this.o=e.extend({},r,i||{});this.isAuto=this.o.auto!==!1&&this.o.autoMode.match(/^loop|bounce$/)!==null;this.isHorizontal=this.o.orientation.match(/^horizontal|vertical$/)!==null&&this.o.orientation==r.orientation;this.isRTL=this.isHorizontal&&e("html").attr("dir")=="rtl";this.isForwards=!this.isAuto||this.isAuto&&this.o.direction.match(/^forwards|backwards$/)!==null&&this.o.direction==r.direction&&!this.isRTL;this.isLoop=this.isAuto&&this.o.autoMode=="loop"||!this.isAuto&&this.o.manualMode=="loop";this.supportsTouch="createTouch"in document;this.events=this.supportsTouch?{start:"touchstart MozTouchDown",move:"touchmove MozTouchMove",end:"touchend touchcancel MozTouchRelease"}:{start:"mouseenter",end:"mouseleave"};this.$list=e(n);var o=this.$list.children();this.$list.addClass("simply-scroll-list").wrap('<div class="simply-scroll-clip"></div>').parent().wrap('<div class="'+this.o.customClass+' simply-scroll-container"></div>');if(!this.isAuto)this.$list.parent().parent().prepend('<div class="simply-scroll-forward"></div>').prepend('<div class="simply-scroll-back"></div>');else if(this.o.pauseButton){this.$list.parent().parent().prepend('<div class="simply-scroll-btn simply-scroll-btn-pause"></div>');this.o.pauseOnHover=!1}if(o.length>1){var u=!1,a=0;if(this.isHorizontal){o.each(function(){a+=e(this).outerWidth(!0)});u=o.eq(0).outerWidth(!0)*o.length!==a}else{o.each(function(){a+=e(this).outerHeight(!0)});u=o.eq(0).outerHeight(!0)*o.length!==a}if(u){this.$list=this.$list.wrap("<div></div>").parent().addClass("simply-scroll-list");this.isHorizontal?this.$list.children().css({"float":"left",width:a+"px"}):this.$list.children().css({height:a+"px"})}}this.o.startOnLoad?e(t).load(function(){s.init()}):this.init()};e.simplyScroll.fn=e.simplyScroll.prototype={};e.simplyScroll.fn.extend=e.simplyScroll.extend=e.extend;e.simplyScroll.fn.extend({init:function(){this.$items=this.$list.children();this.$clip=this.$list.parent();this.$container=this.$clip.parent();this.$btnBack=e(".simply-scroll-back",this.$container);this.$btnForward=e(".simply-scroll-forward",this.$container);if(!this.isHorizontal){this.itemMax=this.$items.eq(0).outerHeight(!0);this.clipMax=this.$clip.height();this.dimension="height";this.moveBackClass="simply-scroll-btn-up";this.moveForwardClass="simply-scroll-btn-down";this.scrollPos="Top"}else{this.itemMax=this.$items.eq(0).outerWidth(!0);this.clipMax=this.$clip.width();this.dimension="width";this.moveBackClass="simply-scroll-btn-left";this.moveForwardClass="simply-scroll-btn-right";this.scrollPos="Left"}this.posMin=0;this.posMax=this.$items.length*this.itemMax;var t=Math.ceil(this.clipMax/this.itemMax);if(this.isAuto&&this.o.autoMode=="loop"){this.$list.css(this.dimension,this.posMax+this.itemMax*t+"px");this.posMax+=this.clipMax-this.o.speed;if(this.isForwards){this.$items.slice(0,t).clone(!0).appendTo(this.$list);this.resetPosition=0}else{this.$items.slice(-t).clone(!0).prependTo(this.$list);this.resetPosition=this.$items.length*this.itemMax;if(this.isRTL){this.$clip[0].dir="ltr";this.$items.css("float","right")}}}else if(!this.isAuto&&this.o.manualMode=="loop"){this.posMax+=this.itemMax*t;this.$list.css(this.dimension,this.posMax+this.itemMax*t+"px");this.posMax+=this.clipMax-this.o.speed;var r=this.$items.slice(0,t).clone(!0).appendTo(this.$list),i=this.$items.slice(-t).clone(!0).prependTo(this.$list);this.resetPositionForwards=this.resetPosition=t*this.itemMax;this.resetPositionBackwards=this.$items.length*this.itemMax;var s=this;this.$btnBack.bind(this.events.start,function(){s.isForwards=!1;s.resetPosition=s.resetPositionBackwards});this.$btnForward.bind(this.events.start,function(){s.isForwards=!0;s.resetPosition=s.resetPositionForwards})}else{this.$list.css(this.dimension,this.posMax+"px");if(this.isForwards)this.resetPosition=0;else{this.resetPosition=this.$items.length*this.itemMax;if(this.isRTL){this.$clip[0].dir="ltr";this.$items.css("float","right")}}}this.resetPos();this.interval=null;this.intervalDelay=Math.floor(1e3/this.o.frameRate);if(!!this.isAuto||this.o.manualMode!="end")while(this.itemMax%this.o.speed!==0){this.o.speed--;if(this.o.speed===0){this.o.speed=1;break}}var s=this;this.trigger=null;this.funcMoveBack=function(e){e!==n&&e.preventDefault();s.trigger=!s.isAuto&&s.o.manualMode=="end"?this:null;s.isAuto?s.isForwards?s.moveBack():s.moveForward():s.moveBack()};this.funcMoveForward=function(e){e!==n&&e.preventDefault();s.trigger=!s.isAuto&&s.o.manualMode=="end"?this:null;s.isAuto?s.isForwards?s.moveForward():s.moveBack():s.moveForward()};this.funcMovePause=function(){s.movePause()};this.funcMoveStop=function(){s.moveStop()};this.funcMoveResume=function(){s.moveResume()};if(this.isAuto){this.paused=!1;function o(){if(s.paused===!1){s.paused=!0;s.funcMovePause()}else{s.paused=!1;s.funcMoveResume()}return s.paused}this.supportsTouch&&this.$items.find("a").length&&(this.supportsTouch=!1);if(this.isAuto&&this.o.pauseOnHover&&!this.supportsTouch)this.$clip.bind(this.events.start,this.funcMovePause).bind(this.events.end,this.funcMoveResume);else if(this.isAuto&&this.o.pauseOnTouch&&!this.o.pauseButton&&this.supportsTouch){var u,a;this.$clip.bind(this.events.start,function(e){o();var t=e.originalEvent.touches[0];u=s.isHorizontal?t.pageX:t.pageY;a=s.$clip[0]["scroll"+s.scrollPos];e.stopPropagation();e.preventDefault()}).bind(this.events.move,function(e){e.stopPropagation();e.preventDefault();var t=e.originalEvent.touches[0],n=s.isHorizontal?t.pageX:t.pageY,r=u-n+a;r<0?r=0:r>s.posMax&&(r=s.posMax);s.$clip[0]["scroll"+s.scrollPos]=r;s.funcMovePause();s.paused=!0})}else this.o.pauseButton&&(this.$btnPause=e(".simply-scroll-btn-pause",this.$container).bind("click",function(t){t.preventDefault();o()?e(this).addClass("active"):e(this).removeClass("active")}));this.funcMoveForward()}else{this.$btnBack.addClass("simply-scroll-btn "+this.moveBackClass).bind(this.events.start,this.funcMoveBack).bind(this.events.end,this.funcMoveStop);this.$btnForward.addClass("simply-scroll-btn "+this.moveForwardClass).bind(this.events.start,this.funcMoveForward).bind(this.events.end,this.funcMoveStop);this.o.manualMode=="end"&&(this.isRTL?this.$btnForward.addClass("disabled"):this.$btnBack.addClass("disabled"))}},moveForward:function(){var e=this;this.movement="forward";this.trigger!==null&&this.$btnBack.removeClass("disabled");e.interval=setInterval(function(){e.$clip[0]["scroll"+e.scrollPos]<e.posMax-e.clipMax?e.$clip[0]["scroll"+e.scrollPos]+=e.o.speed:e.isLoop?e.resetPos():e.moveStop(e.movement)},e.intervalDelay)},moveBack:function(){var e=this;this.movement="back";this.trigger!==null&&this.$btnForward.removeClass("disabled");e.interval=setInterval(function(){e.$clip[0]["scroll"+e.scrollPos]>e.posMin?e.$clip[0]["scroll"+e.scrollPos]-=e.o.speed:e.isLoop?e.resetPos():e.moveStop(e.movement)},e.intervalDelay)},movePause:function(){clearInterval(this.interval)},moveStop:function(t){this.movePause();if(this.trigger!==null){typeof t!="undefined"&&e(this.trigger).addClass("disabled");this.trigger=null}this.isAuto&&this.o.autoMode=="bounce"&&(t=="forward"?this.moveBack():this.moveForward())},moveResume:function(){this.movement=="forward"?this.moveForward():this.moveBack()},resetPos:function(){this.$clip[0]["scroll"+this.scrollPos]=this.resetPosition}})})(jQuery,window);